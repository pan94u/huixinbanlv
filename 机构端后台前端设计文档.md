# "智伴关爱" 机构管理后台 - 前端设计文档

## 1. 产品概述

**产品名称**：智伴关爱机构管理后台  
**目标用户**：养老院、社区养老中心等机构的管理者、护理人员和社工  
**核心价值**：数字化管理平台，实现从被动响应到主动预防，提升照护效率

## 2. 技术架构

### 2.1 技术栈（Web管理后台）
- **前端框架**：React 18 + TypeScript
- **构建工具**：Vite（快速构建）
- **UI组件库**：Ant Design Pro（企业级后台模板）
- **图表库**：ECharts（数据可视化）
- **状态管理**：React Query（服务端状态管理）
- **实时通信**：WebSocket（实时预警）
- **地图服务**：高德地图Web API
- **部署方式**：SPA单页应用 + CDN

### 2.2 Web后台优势
- **开发效率**：使用Ant Design Pro模板，快速搭建
- **响应式设计**：支持PC、平板多端访问
- **权限管理**：基于角色的访问控制
- **数据可视化**：丰富的图表和报表功能
- **实时监控**：WebSocket实时数据推送

## 3. 页面设计规范

### 3.1 总览仪表盘（Dashboard）

#### 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│ 智伴关爱机构后台    👤管理员    🔔5    ⚙️设置    🚪退出   │ 顶部导航
├─────────────────────────────────────────────────────────────┤
│ 📊 核心指标                                                 │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│ │在册老人  │ │今日预警 │ │待处理   │ │设备在线 │           │
│ │  156人  │ │  8条   │ │订单 12  │ │率 94%  │           │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
├─────────────────────────────────────────────────────────────┤
│ 📈 健康趋势分析                    📍 实时位置监控          │
│ ┌─────────────────────────┐      ┌─────────────────────┐   │
│ │     血压异常趋势图        │      │      楼层分布图      │   │
│ │  ╱╲      ╱╲            │      │  🟢🟢🔴🟡🟢🟢🟢    │   │
│ │ ╱  ╲    ╱  ╲           │      │  🟢🔴🟢🟢🟡🟢🟢    │   │
│ │╱    ╲  ╱    ╲          │      │  🟢🟢🟢🟢🟢🔴🟢    │   │
│ └─────────────────────────┘      └─────────────────────┘   │
├─────────────────────────────────────────────────────────────┤
│ ⚠️ 紧急预警 (实时)                 🔮 AI健康预测            │
│ 🚨 301房 张奶奶 跌倒预警           📊 本周高风险老人: 5位    │
│ 🩺 205房 李爷爷 血压异常           📈 预测住院风险: 3位     │
│ 💊 108房 王奶奶 用药逾期           🧠 情绪异常预警: 2位     │
└─────────────────────────────────────────────────────────────┘
```

#### 核心功能
- **实时数据监控**：关键指标实时更新
- **可视化分析**：健康趋势、位置分布图表
- **智能预测**：AI分析健康风险
- **快速响应**：预警信息一键处理

#### 数据结构设计
```typescript
interface DashboardData {
  summary: {
    totalElderly: number;
    todayAlerts: number;
    pendingOrders: number;
    deviceOnlineRate: number;
  };
  healthTrends: {
    bloodPressure: ChartDataPoint[];
    heartRate: ChartDataPoint[];
    activity: ChartDataPoint[];
  };
  locationMap: {
    floor: number;
    rooms: RoomStatus[];
  }[];
  alerts: AlertItem[];
  predictions: PredictionItem[];
}
```

### 3.2 老人管理页面（Elderly Management）

#### 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│ ← 老人管理    🔍搜索框    筛选: [全部▼] [健康状态▼] [楼层▼] │ 操作栏
├─────────────────────────────────────────────────────────────┤
│ 姓名    年龄  房间号  健康状态  设备状态  最后活动  操作     │ 表头
├─────────────────────────────────────────────────────────────┤
│ 👴张大爷  78   301   🟢正常   🟢在线   2分钟前   [详情]    │ 数据行1
│ 👵李奶奶  82   205   🔴异常   🟢在线   5分钟前   [详情]    │ 数据行2
│ 👴王爷爷  75   108   🟡注意   🔴离线   1小时前   [详情]    │ 数据行3
│ 👵赵奶奶  80   402   🟢正常   🟢在线   刚刚     [详情]    │ 数据行4
│ ...                                                        │
├─────────────────────────────────────────────────────────────┤
│ 显示 1-20 条，共 156 条    [上一页] 1 2 3 4 5 [下一页]    │ 分页
└─────────────────────────────────────────────────────────────┘
```

#### 核心功能
- **信息管理**：老人基本信息、健康档案
- **状态监控**：实时健康状态、设备状态
- **快速筛选**：多维度筛选和搜索
- **批量操作**：批量导出、批量设置

#### 表格组件设计
```tsx
const ElderlyTable: React.FC = () => {
  const [filters, setFilters] = useState<FilterState>({});
  const [pagination, setPagination] = useState({ current: 1, pageSize: 20 });
  
  const { data, loading } = useGetElderlyListQuery({
    ...filters,
    ...pagination
  });

  const columns: ColumnsType<ElderlyRecord> = [
    {
      title: '姓名',
      dataIndex: 'name',
      render: (name, record) => (
        <Space>
          <Avatar src={record.avatar} icon={<UserOutlined />} />
          <span>{name}</span>
        </Space>
      )
    },
    {
      title: '健康状态',
      dataIndex: 'healthStatus',
      render: (status) => (
        <Tag color={getHealthStatusColor(status)}>
          {getHealthStatusText(status)}
        </Tag>
      )
    },
    {
      title: '操作',
      render: (_, record) => (
        <Space>
          <Button size="small" onClick={() => viewDetail(record.id)}>
            详情
          </Button>
          <Button size="small" onClick={() => editRecord(record.id)}>
            编辑
          </Button>
        </Space>
      )
    }
  ];

  return (
    <Table
      columns={columns}
      dataSource={data?.list}
      loading={loading}
      pagination={{
        ...pagination,
        total: data?.total,
        onChange: (page, size) => setPagination({ current: page, pageSize: size })
      }}
      scroll={{ y: 600 }}
    />
  );
};
```

### 3.3 健康数据分析页面（Health Analytics）

#### 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│ ← 健康数据分析    时间: [本周▼]  指标: [血压▼]  导出数据     │ 操作栏
├─────────────────────────────────────────────────────────────┤
│ 📊 整体健康趋势                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                血压分布统计                              │ │
│ │  正常 ████████████████████ 78%                        │ │
│ │  偏高 ██████ 15%                                      │ │
│ │  异常 ███ 7%                                          │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📈 趋势分析图表                    🎯 异常数据预警           │
│ ┌─────────────────────────┐      ┌─────────────────────┐   │
│ │     7日血压趋势          │      │  高风险老人列表      │   │
│ │  ╱╲      ╱╲            │      │  👴李爷爷 血压持续偏高 │   │
│ │ ╱  ╲    ╱  ╲           │      │  👵王奶奶 心率异常    │   │
│ │╱    ╲  ╱    ╲          │      │  👴张爷爷 血糖波动大  │   │
│ └─────────────────────────┘      └─────────────────────┘   │
├─────────────────────────────────────────────────────────────┤
│ 🤖 AI健康预测报告                                           │
│ • 基于历史数据分析，预测未来7天内可能出现健康问题的老人     │
│ • 高风险: 3人  中风险: 8人  低风险: 145人                  │
│ • 建议重点关注: 301房张大爷(心血管风险)、205房李奶奶(跌倒风险) │
└─────────────────────────────────────────────────────────────┘
```

#### 核心功能
- **数据可视化**：多维度健康数据图表
- **趋势分析**：历史数据对比分析
- **异常检测**：自动识别异常数据
- **AI预测**：健康风险预测模型

#### 图表组件设计
```tsx
const HealthChart: React.FC<HealthChartProps> = ({ 
  data, 
  type, 
  timeRange 
}) => {
  const chartOption = useMemo(() => {
    return {
      title: { text: getChartTitle(type) },
      tooltip: { trigger: 'axis' },
      xAxis: {
        type: 'category',
        data: data.map(item => item.date)
      },
      yAxis: { type: 'value' },
      series: [{
        data: data.map(item => item.value),
        type: 'line',
        smooth: true,
        areaStyle: { opacity: 0.3 }
      }]
    };
  }, [data, type]);

  return (
    <div className="health-chart">
      <ReactECharts 
        option={chartOption} 
        style={{ height: '300px' }}
        opts={{ renderer: 'canvas' }}
      />
    </div>
  );
};
```

### 3.4 预警中心页面（Alert Center）

#### 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│ ← 预警中心    筛选: [全部▼] [紧急▼] [今日▼]  批量处理       │ 操作栏
├─────────────────────────────────────────────────────────────┤
│ 🚨 紧急预警                                                 │ 紧急区域
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🆘 301房 张大爷 跌倒检测  14:30  [立即处理] [分派任务]  │ │
│ │ 🩺 205房 李奶奶 血压异常  14:25  [查看详情] [联系医生]  │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ⚠️ 一般预警                                                 │ 一般区域
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 💊 108房 王爷爷 用药逾期  13:45  [语音提醒] [标记处理]  │ │
│ │ 🔋 402房 赵奶奶 设备低电  12:30  [充电提醒] [已处理]   │ │
│ │ 😴 203房 孙奶奶 睡眠异常  11:15  [查看数据] [已处理]   │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📋 处理记录                                                 │ 历史区域
│ • 14:20 护工小李处理了301房张大爷的跌倒预警                 │
│ • 13:50 医生王主任查看了205房李奶奶的血压数据               │
│ • 13:30 管理员标记了108房王爷爷的用药提醒为已处理           │
└─────────────────────────────────────────────────────────────┘
```

#### 核心功能
- **分级预警**：紧急、一般、已处理分类显示
- **快速处理**：一键分派任务、联系相关人员
- **实时更新**：WebSocket实时推送新预警
- **处理跟踪**：完整的处理记录和责任追踪

#### 预警处理组件
```tsx
const AlertCard: React.FC<AlertCardProps> = ({ alert, onHandle }) => {
  const getAlertColor = (level: AlertLevel) => {
    const colors = {
      emergency: '#ff4d4f',
      warning: '#faad14',
      info: '#1890ff'
    };
    return colors[level];
  };

  const handleActions = [
    { key: 'assign', label: '分派任务', icon: <UserAddOutlined /> },
    { key: 'contact', label: '联系医生', icon: <PhoneOutlined /> },
    { key: 'view', label: '查看详情', icon: <EyeOutlined /> },
    { key: 'resolve', label: '标记处理', icon: <CheckOutlined /> }
  ];

  return (
    <Card 
      size="small"
      className={`alert-card alert-${alert.level}`}
      style={{ borderLeft: `4px solid ${getAlertColor(alert.level)}` }}
    >
      <Row justify="space-between" align="middle">
        <Col span={16}>
          <Space>
            <Tag color={getAlertColor(alert.level)}>
              {alert.type}
            </Tag>
            <Text strong>{alert.elderlyName}</Text>
            <Text type="secondary">{alert.location}</Text>
            <Text type="secondary">{formatTime(alert.timestamp)}</Text>
          </Space>
        </Col>
        <Col span={8}>
          <Space>
            {handleActions.map(action => (
              <Button
                key={action.key}
                size="small"
                icon={action.icon}
                onClick={() => onHandle(action.key, alert)}
              >
                {action.label}
              </Button>
            ))}
          </Space>
        </Col>
      </Row>
    </Card>
  );
};
```

### 3.5 服务订单管理页面（Service Orders）

#### 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│ ← 服务订单    状态: [全部▼] [待确认▼] [进行中▼]  导出订单   │ 操作栏
├─────────────────────────────────────────────────────────────┤
│ 订单号    服务类型  老人姓名  预约时间    状态    操作       │ 表头
├─────────────────────────────────────────────────────────────┤
│ #2024001  上门护理  张大爷   今日14:00  待确认  [确认][详情] │ 订单1
│ #2024002  药品配送  李奶奶   今日15:30  进行中  [跟踪][详情] │ 订单2
│ #2024003  陪诊服务  王爷爷   明日09:00  待分派  [分派][详情] │ 订单3
│ #2024004  心理咨询  赵奶奶   明日10:30  已完成  [评价][详情] │ 订单4
├─────────────────────────────────────────────────────────────┤
│ 📊 订单统计                                                 │
│ 今日订单: 12单  完成率: 85%  平均评分: 4.6分               │
│ 本周订单: 68单  收入: ¥12,450  客户满意度: 92%            │
└─────────────────────────────────────────────────────────────┘
```

#### 核心功能
- **订单流转**：从待确认到已完成的完整流程
- **任务分派**：将订单分派给具体员工
- **进度跟踪**：实时跟踪服务进度
- **数据统计**：订单量、收入、满意度统计

### 3.6 员工管理页面（Staff Management）

#### 布局结构
```
┌─────────────────────────────────────────────────────────────┐
│ ← 员工管理    [添加员工]  部门: [全部▼] [护理▼] [医务▼]     │ 操作栏
├─────────────────────────────────────────────────────────────┤
│ 姓名      部门    职位      在线状态  当前任务  操作         │ 表头
├─────────────────────────────────────────────────────────────┤
│ 👩李护士   护理部  主管护士  🟢在线   3个任务  [详情][排班]  │ 员工1
│ 👨王医生   医务部  主治医师  🟢在线   2个任务  [详情][排班]  │ 员工2
│ 👩张护工   护理部  护理员    🔴离线   0个任务  [详情][排班]  │ 员工3
│ 👨刘社工   社工部  社工师    🟢在线   1个任务  [详情][排班]  │ 员工4
├─────────────────────────────────────────────────────────────┤
│ 📈 员工绩效统计                                             │
│ 本月服务量: 护理部 245次  医务部 89次  社工部 67次          │
│ 客户评分: 李护士 4.8分  王医生 4.9分  刘社工 4.7分         │
└─────────────────────────────────────────────────────────────┘
```

## 4. 组件库设计

### 4.1 数据看板组件
```tsx
const DataCard: React.FC<DataCardProps> = ({ 
  title, 
  value, 
  trend, 
  icon,
  color = '#1890ff' 
}) => {
  return (
    <Card className="data-card">
      <Statistic
        title={title}
        value={value}
        prefix={<Icon component={icon} style={{ color }} />}
        suffix={
          trend && (
            <span className={`trend ${trend > 0 ? 'up' : 'down'}`}>
              {trend > 0 ? <ArrowUpOutlined /> : <ArrowDownOutlined />}
              {Math.abs(trend)}%
            </span>
          )
        }
      />
    </Card>
  );
};
```

### 4.2 实时地图组件
```tsx
const RealTimeMap: React.FC<RealTimeMapProps> = ({ floors, onRoomClick }) => {
  const [selectedFloor, setSelectedFloor] = useState(1);
  
  return (
    <div className="realtime-map">
      <div className="floor-selector">
        {floors.map(floor => (
          <Button
            key={floor.number}
            type={selectedFloor === floor.number ? 'primary' : 'default'}
            onClick={() => setSelectedFloor(floor.number)}
          >
            {floor.number}楼
          </Button>
        ))}
      </div>
      <div className="floor-layout">
        {floors
          .find(f => f.number === selectedFloor)
          ?.rooms.map(room => (
            <div
              key={room.id}
              className={`room-indicator ${room.status}`}
              onClick={() => onRoomClick(room)}
              title={`${room.number}房 - ${room.elderlyName}`}
            >
              {room.number}
            </div>
          ))}
      </div>
    </div>
  );
};
```

### 4.3 任务分派组件
```tsx
const TaskAssignModal: React.FC<TaskAssignModalProps> = ({ 
  visible, 
  alert, 
  onAssign, 
  onCancel 
}) => {
  const [form] = Form.useForm();
  const { data: staffList } = useGetStaffListQuery({ available: true });

  const handleSubmit = async (values: any) => {
    try {
      await onAssign({
        alertId: alert.id,
        assigneeId: values.assignee,
        priority: values.priority,
        description: values.description,
        deadline: values.deadline
      });
      message.success('任务分派成功');
      form.resetFields();
    } catch (error) {
      message.error('任务分派失败');
    }
  };

  return (
    <Modal
      title="分派任务"
      open={visible}
      onCancel={onCancel}
      footer={null}
    >
      <Form form={form} onFinish={handleSubmit} layout="vertical">
        <Form.Item name="assignee" label="指派给" rules={[{ required: true }]}>
          <Select placeholder="选择员工">
            {staffList?.map(staff => (
              <Option key={staff.id} value={staff.id}>
                <Space>
                  <Avatar size="small" src={staff.avatar} />
                  {staff.name} - {staff.department}
                </Space>
              </Option>
            ))}
          </Select>
        </Form.Item>
        
        <Form.Item name="priority" label="优先级" rules={[{ required: true }]}>
          <Radio.Group>
            <Radio value="high">紧急</Radio>
            <Radio value="medium">一般</Radio>
            <Radio value="low">较低</Radio>
          </Radio.Group>
        </Form.Item>
        
        <Form.Item name="description" label="任务描述">
          <TextArea rows={3} placeholder="请描述具体任务内容" />
        </Form.Item>
        
        <Form.Item name="deadline" label="截止时间">
          <DatePicker showTime style={{ width: '100%' }} />
        </Form.Item>
        
        <Form.Item>
          <Space>
            <Button type="primary" htmlType="submit">
              确认分派
            </Button>
            <Button onClick={onCancel}>
              取消
            </Button>
          </Space>
        </Form.Item>
      </Form>
    </Modal>
  );
};
```

## 5. 状态管理架构

### 5.1 Store结构
```typescript
interface RootState {
  auth: AuthState;
  dashboard: DashboardState;
  elderly: ElderlyState;
  health: HealthState;
  alerts: AlertsState;
  orders: OrdersState;
  staff: StaffState;
  settings: SettingsState;
}

const store = configureStore({
  reducer: {
    auth: authSlice.reducer,
    dashboard: dashboardSlice.reducer,
    elderly: elderlySlice.reducer,
    health: healthSlice.reducer,
    alerts: alertsSlice.reducer,
    orders: ordersSlice.reducer,
    staff: staffSlice.reducer,
    settings: settingsSlice.reducer,
    api: apiSlice.reducer
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware().concat(
      apiSlice.middleware,
      socketMiddleware,
      loggerMiddleware
    )
});
```

### 5.2 WebSocket中间件
```typescript
const socketMiddleware: Middleware = (store) => (next) => (action) => {
  if (action.type === 'socket/connect') {
    const socket = io(WS_URL);
    
    socket.on('alert', (alert) => {
      store.dispatch(alertsSlice.actions.addAlert(alert));
      // 显示通知
      notification.error({
        message: '紧急预警',
        description: `${alert.elderlyName} - ${alert.message}`,
        duration: 0
      });
    });
    
    socket.on('healthData', (data) => {
      store.dispatch(healthSlice.actions.updateHealthData(data));
    });
  }
  
  return next(action);
};
```

## 6. 权限管理系统

### 6.1 角色权限设计
```typescript
enum Role {
  ADMIN = 'admin',
  MANAGER = 'manager',
  NURSE = 'nurse',
  DOCTOR = 'doctor',
  SOCIAL_WORKER = 'social_worker'
}

const permissions = {
  [Role.ADMIN]: ['*'], // 全部权限
  [Role.MANAGER]: [
    'dashboard.view',
    'elderly.view',
    'elderly.edit',
    'health.view',
    'alerts.view',
    'alerts.handle',
    'orders.view',
    'orders.manage',
    'staff.view'
  ],
  [Role.NURSE]: [
    'elderly.view',
    'health.view',
    'alerts.view',
    'alerts.handle',
    'orders.view'
  ],
  [Role.DOCTOR]: [
    'elderly.view',
    'health.view',
    'health.analyze',
    'alerts.view',
    'orders.view'
  ]
};
```

### 6.2 权限控制组件
```tsx
const PermissionGuard: React.FC<PermissionGuardProps> = ({ 
  permission, 
  children,
  fallback = null 
}) => {
  const userRole = useSelector((state: RootState) => state.auth.user?.role);
  const hasPermission = checkPermission(userRole, permission);
  
  return hasPermission ? <>{children}</> : fallback;
};

// 使用示例
<PermissionGuard permission="elderly.edit">
  <Button onClick={handleEdit}>编辑</Button>
</PermissionGuard>
```

## 7. 性能优化策略

### 7.1 数据加载优化
- **虚拟滚动**：大数据量表格使用虚拟滚动
- **分页加载**：合理的分页大小和预加载
- **缓存策略**：RTK Query自动缓存和失效策略
- **懒加载**：非关键组件按需加载

### 7.2 渲染优化
- **React.memo**：防止不必要的重渲染
- **useMemo/useCallback**：缓存计算结果和函数
- **代码分割**：路由级别的代码分割
- **图表优化**：ECharts按需引入和Canvas渲染

## 8. 开发里程碑

### Phase 1: 基础框架（3周）
- [ ] 项目初始化和基础架构
- [ ] 权限系统和路由配置
- [ ] 基础组件库开发
- [ ] API接口集成

### Phase 2: 核心功能（5周）
- [ ] 仪表盘和数据可视化
- [ ] 老人管理和健康分析
- [ ] 预警系统和实时通信
- [ ] 订单管理和员工管理

### Phase 3: 高级功能（3周）
- [ ] AI预测功能集成
- [ ] 实时地图和位置监控
- [ ] 报表系统和数据导出
- [ ] 移动端适配

### Phase 4: 优化完善（2周）
- [ ] 性能优化和测试
- [ ] 用户体验优化
- [ ] 安全性加固
- [ ] 部署和监控

## 9. 投资人演示要点

### 9.1 产品亮点
1. **数字化管理**：传统养老机构的数字化转型解决方案
2. **AI智能预测**：提前发现健康风险，变被动为主动
3. **效率提升**：减少人工巡查，提高护理效率50%+
4. **数据驱动**：基于数据分析制定个性化照护方案

### 9.2 技术优势
- 现代化Web技术栈，稳定可靠
- 模块化设计，易于定制和扩展
- 实时数据处理，响应速度快
- 多端适配，支持PC和移动设备

### 9.3 商业价值
- **降本增效**：减少人力成本30%，提升服务质量
- **差异化竞争**：科技赋能，提升机构竞争力
- **规模化复制**：标准化产品，易于推广复制
- **数据资产**：积累宝贵的健康数据，支撑更多创新服务

### 9.4 市场前景
- 养老机构数字化需求旺盛
- 政策支持智慧养老发展
- SaaS模式，可持续收入
- 可扩展至更多垂直领域
